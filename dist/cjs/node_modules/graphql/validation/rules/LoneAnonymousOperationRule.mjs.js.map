{"version":3,"file":"LoneAnonymousOperationRule.mjs.js","sources":["../../../../../../node_modules/graphql/validation/rules/LoneAnonymousOperationRule.mjs"],"sourcesContent":["import { GraphQLError } from '../../error/GraphQLError.mjs';\nimport { Kind } from '../../language/kinds.mjs';\n\n/**\n * Lone anonymous operation\n *\n * A GraphQL document is only valid if when it contains an anonymous operation\n * (the query short-hand) that it contains only that one operation definition.\n *\n * See https://spec.graphql.org/draft/#sec-Lone-Anonymous-Operation\n */\nexport function LoneAnonymousOperationRule(context) {\n  let operationCount = 0;\n  return {\n    Document(node) {\n      operationCount = node.definitions.filter(\n        (definition) => definition.kind === Kind.OPERATION_DEFINITION,\n      ).length;\n    },\n\n    OperationDefinition(node) {\n      if (!node.name && operationCount > 1) {\n        context.reportError(\n          new GraphQLError(\n            'This anonymous operation must be the only defined operation.',\n            {\n              nodes: node,\n            },\n          ),\n        );\n      }\n    },\n  };\n}\n"],"names":["Kind","GraphQLError"],"mappings":";;;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,0BAA0B,CAAC,OAAO,EAAE;AACpD,EAAE,IAAI,cAAc,GAAG,CAAC,CAAC;AACzB,EAAE,OAAO;AACT,IAAI,QAAQ,CAAC,IAAI,EAAE;AACnB,MAAM,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM;AAC9C,QAAQ,CAAC,UAAU,KAAK,UAAU,CAAC,IAAI,KAAKA,UAAI,CAAC,oBAAoB;AACrE,OAAO,CAAC,MAAM,CAAC;AACf,KAAK;AACL;AACA,IAAI,mBAAmB,CAAC,IAAI,EAAE;AAC9B,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,cAAc,GAAG,CAAC,EAAE;AAC5C,QAAQ,OAAO,CAAC,WAAW;AAC3B,UAAU,IAAIC,yBAAY;AAC1B,YAAY,8DAA8D;AAC1E,YAAY;AACZ,cAAc,KAAK,EAAE,IAAI;AACzB,aAAa;AACb,WAAW;AACX,SAAS,CAAC;AACV,OAAO;AACP,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}