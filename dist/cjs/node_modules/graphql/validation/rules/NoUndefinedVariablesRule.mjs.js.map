{"version":3,"file":"NoUndefinedVariablesRule.mjs.js","sources":["../../../../../../node_modules/graphql/validation/rules/NoUndefinedVariablesRule.mjs"],"sourcesContent":["import { GraphQLError } from '../../error/GraphQLError.mjs';\n\n/**\n * No undefined variables\n *\n * A GraphQL operation is only valid if all variables encountered, both directly\n * and via fragment spreads, are defined by that operation.\n *\n * See https://spec.graphql.org/draft/#sec-All-Variable-Uses-Defined\n */\nexport function NoUndefinedVariablesRule(context) {\n  let variableNameDefined = Object.create(null);\n  return {\n    OperationDefinition: {\n      enter() {\n        variableNameDefined = Object.create(null);\n      },\n\n      leave(operation) {\n        const usages = context.getRecursiveVariableUsages(operation);\n\n        for (const { node } of usages) {\n          const varName = node.name.value;\n\n          if (variableNameDefined[varName] !== true) {\n            context.reportError(\n              new GraphQLError(\n                operation.name\n                  ? `Variable \"$${varName}\" is not defined by operation \"${operation.name.value}\".`\n                  : `Variable \"$${varName}\" is not defined.`,\n                {\n                  nodes: [node, operation],\n                },\n              ),\n            );\n          }\n        }\n      },\n    },\n\n    VariableDefinition(node) {\n      variableNameDefined[node.variable.name.value] = true;\n    },\n  };\n}\n"],"names":["GraphQLError"],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,wBAAwB,CAAC,OAAO,EAAE;AAClD,EAAE,IAAI,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAChD,EAAE,OAAO;AACT,IAAI,mBAAmB,EAAE;AACzB,MAAM,KAAK,GAAG;AACd,QAAQ,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAClD,OAAO;AACP;AACA,MAAM,KAAK,CAAC,SAAS,EAAE;AACvB,QAAQ,MAAM,MAAM,GAAG,OAAO,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;AACrE;AACA,QAAQ,KAAK,MAAM,EAAE,IAAI,EAAE,IAAI,MAAM,EAAE;AACvC,UAAU,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAC1C;AACA,UAAU,IAAI,mBAAmB,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;AACrD,YAAY,OAAO,CAAC,WAAW;AAC/B,cAAc,IAAIA,yBAAY;AAC9B,gBAAgB,SAAS,CAAC,IAAI;AAC9B,oBAAoB,CAAC,WAAW,EAAE,OAAO,CAAC,+BAA+B,EAAE,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;AACnG,oBAAoB,CAAC,WAAW,EAAE,OAAO,CAAC,iBAAiB,CAAC;AAC5D,gBAAgB;AAChB,kBAAkB,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,CAAC;AAC1C,iBAAiB;AACjB,eAAe;AACf,aAAa,CAAC;AACd,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,kBAAkB,CAAC,IAAI,EAAE;AAC7B,MAAM,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AAC3D,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}