'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

require('../../utilities/globals/index.js');
require('../../../../graphql/version.mjs.js');
require('../../../../graphql/language/ast.mjs.js');
require('../../../../graphql/language/directiveLocation.mjs.js');
require('../../../../graphql/language/kinds.mjs.js');
require('../../../../graphql/language/tokenKind.mjs.js');
require('../../../../graphql/jsutils/instanceOf.mjs.js');
require('../../../../graphql/language/visitor.mjs.js');
require('../../../../graphql/type/directives.mjs.js');
require('../../../../graphql/type/introspection.mjs.js');
require('../../../../graphql/validation/specifiedRules.mjs.js');
require('../../../../graphql/type/scalars.mjs.js');
require('../../../../graphql/validation/rules/KnownTypeNamesRule.mjs.js');
require('../../../../graphql/validation/rules/PossibleTypeExtensionsRule.mjs.js');
require('../../../../graphql/utilities/extendSchema.mjs.js');
require('../../../../graphql/utilities/findBreakingChanges.mjs.js');
require('../../utilities/graphql/storeUtils.js');
require('../../utilities/graphql/transform.js');
require('../../utilities/common/mergeDeep.js');
require('../../utilities/observables/Observable.js');
require('../../utilities/observables/Concast.js');
require('../../utilities/common/canUse.js');
var throwServerError = require('../utils/throwServerError.js');

var hasOwnProperty = Object.prototype.hasOwnProperty;
function parseAndCheckHttpResponse(operations) {
    return function (response) { return response
        .text()
        .then(function (bodyText) {
        try {
            return JSON.parse(bodyText);
        }
        catch (err) {
            var parseError = err;
            parseError.name = 'ServerParseError';
            parseError.response = response;
            parseError.statusCode = response.status;
            parseError.bodyText = bodyText;
            throw parseError;
        }
    })
        .then(function (result) {
        if (response.status >= 300) {
            throwServerError.throwServerError(response, result, "Response not successful: Received status code ".concat(response.status));
        }
        if (!Array.isArray(result) &&
            !hasOwnProperty.call(result, 'data') &&
            !hasOwnProperty.call(result, 'errors')) {
            throwServerError.throwServerError(response, result, "Server response was missing for query '".concat(Array.isArray(operations)
                ? operations.map(function (op) { return op.operationName; })
                : operations.operationName, "'."));
        }
        return result;
    }); };
}

exports.parseAndCheckHttpResponse = parseAndCheckHttpResponse;
//# sourceMappingURL=parseAndCheckHttpResponse.js.map
