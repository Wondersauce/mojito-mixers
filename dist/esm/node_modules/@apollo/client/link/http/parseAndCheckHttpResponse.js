import '../../utilities/globals/index.js';
import '../../../../graphql/version.mjs.js';
import '../../../../graphql/language/ast.mjs.js';
import '../../../../graphql/language/directiveLocation.mjs.js';
import '../../../../graphql/language/kinds.mjs.js';
import '../../../../graphql/language/tokenKind.mjs.js';
import '../../../../graphql/jsutils/instanceOf.mjs.js';
import '../../../../graphql/language/visitor.mjs.js';
import '../../../../graphql/type/directives.mjs.js';
import '../../../../graphql/type/introspection.mjs.js';
import '../../../../graphql/validation/specifiedRules.mjs.js';
import '../../../../graphql/type/scalars.mjs.js';
import '../../../../graphql/validation/rules/KnownTypeNamesRule.mjs.js';
import '../../../../graphql/validation/rules/PossibleTypeExtensionsRule.mjs.js';
import '../../../../graphql/utilities/extendSchema.mjs.js';
import '../../../../graphql/utilities/findBreakingChanges.mjs.js';
import '../../utilities/graphql/storeUtils.js';
import '../../utilities/graphql/transform.js';
import '../../utilities/common/mergeDeep.js';
import '../../utilities/observables/Observable.js';
import '../../utilities/observables/Concast.js';
import '../../utilities/common/canUse.js';
import { throwServerError } from '../utils/throwServerError.js';

var hasOwnProperty = Object.prototype.hasOwnProperty;
function parseAndCheckHttpResponse(operations) {
    return function (response) { return response
        .text()
        .then(function (bodyText) {
        try {
            return JSON.parse(bodyText);
        }
        catch (err) {
            var parseError = err;
            parseError.name = 'ServerParseError';
            parseError.response = response;
            parseError.statusCode = response.status;
            parseError.bodyText = bodyText;
            throw parseError;
        }
    })
        .then(function (result) {
        if (response.status >= 300) {
            throwServerError(response, result, "Response not successful: Received status code ".concat(response.status));
        }
        if (!Array.isArray(result) &&
            !hasOwnProperty.call(result, 'data') &&
            !hasOwnProperty.call(result, 'errors')) {
            throwServerError(response, result, "Server response was missing for query '".concat(Array.isArray(operations)
                ? operations.map(function (op) { return op.operationName; })
                : operations.operationName, "'."));
        }
        return result;
    }); };
}

export { parseAndCheckHttpResponse };
//# sourceMappingURL=parseAndCheckHttpResponse.js.map
