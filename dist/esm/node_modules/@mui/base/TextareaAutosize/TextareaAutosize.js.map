{"version":3,"file":"TextareaAutosize.js","sources":["../../../../../../node_modules/@mui/base/TextareaAutosize/TextareaAutosize.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"onChange\", \"maxRows\", \"minRows\", \"style\", \"value\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { unstable_debounce as debounce, unstable_useForkRef as useForkRef, unstable_useEnhancedEffect as useEnhancedEffect, unstable_ownerWindow as ownerWindow } from '@mui/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction getStyleValue(computedStyle, property) {\n  return parseInt(computedStyle[property], 10) || 0;\n}\n\nconst styles = {\n  shadow: {\n    // Visibility needed to hide the extra text area on iPads\n    visibility: 'hidden',\n    // Remove from the content flow\n    position: 'absolute',\n    // Ignore the scrollbar width\n    overflow: 'hidden',\n    height: 0,\n    top: 0,\n    left: 0,\n    // Create a new layer, increase the isolation of the computed values\n    transform: 'translateZ(0)'\n  }\n};\nconst TextareaAutosize = /*#__PURE__*/React.forwardRef(function TextareaAutosize(props, ref) {\n  const {\n    onChange,\n    maxRows,\n    minRows = 1,\n    style,\n    value\n  } = props,\n        other = _objectWithoutPropertiesLoose(props, _excluded);\n\n  const {\n    current: isControlled\n  } = React.useRef(value != null);\n  const inputRef = React.useRef(null);\n  const handleRef = useForkRef(ref, inputRef);\n  const shadowRef = React.useRef(null);\n  const renders = React.useRef(0);\n  const [state, setState] = React.useState({});\n  const syncHeight = React.useCallback(() => {\n    const input = inputRef.current;\n    const containerWindow = ownerWindow(input);\n    const computedStyle = containerWindow.getComputedStyle(input); // If input's width is shrunk and it's not visible, don't sync height.\n\n    if (computedStyle.width === '0px') {\n      return;\n    }\n\n    const inputShallow = shadowRef.current;\n    inputShallow.style.width = computedStyle.width;\n    inputShallow.value = input.value || props.placeholder || 'x';\n\n    if (inputShallow.value.slice(-1) === '\\n') {\n      // Certain fonts which overflow the line height will cause the textarea\n      // to report a different scrollHeight depending on whether the last line\n      // is empty. Make it non-empty to avoid this issue.\n      inputShallow.value += ' ';\n    }\n\n    const boxSizing = computedStyle['box-sizing'];\n    const padding = getStyleValue(computedStyle, 'padding-bottom') + getStyleValue(computedStyle, 'padding-top');\n    const border = getStyleValue(computedStyle, 'border-bottom-width') + getStyleValue(computedStyle, 'border-top-width'); // The height of the inner content\n\n    const innerHeight = inputShallow.scrollHeight; // Measure height of a textarea with a single row\n\n    inputShallow.value = 'x';\n    const singleRowHeight = inputShallow.scrollHeight; // The height of the outer content\n\n    let outerHeight = innerHeight;\n\n    if (minRows) {\n      outerHeight = Math.max(Number(minRows) * singleRowHeight, outerHeight);\n    }\n\n    if (maxRows) {\n      outerHeight = Math.min(Number(maxRows) * singleRowHeight, outerHeight);\n    }\n\n    outerHeight = Math.max(outerHeight, singleRowHeight); // Take the box sizing into account for applying this value as a style.\n\n    const outerHeightStyle = outerHeight + (boxSizing === 'border-box' ? padding + border : 0);\n    const overflow = Math.abs(outerHeight - innerHeight) <= 1;\n    setState(prevState => {\n      // Need a large enough difference to update the height.\n      // This prevents infinite rendering loop.\n      if (renders.current < 20 && (outerHeightStyle > 0 && Math.abs((prevState.outerHeightStyle || 0) - outerHeightStyle) > 1 || prevState.overflow !== overflow)) {\n        renders.current += 1;\n        return {\n          overflow,\n          outerHeightStyle\n        };\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (renders.current === 20) {\n          console.error(['MUI: Too many re-renders. The layout is unstable.', 'TextareaAutosize limits the number of renders to prevent an infinite loop.'].join('\\n'));\n        }\n      }\n\n      return prevState;\n    });\n  }, [maxRows, minRows, props.placeholder]);\n  React.useEffect(() => {\n    const handleResize = debounce(() => {\n      renders.current = 0;\n      syncHeight();\n    });\n    const containerWindow = ownerWindow(inputRef.current);\n    containerWindow.addEventListener('resize', handleResize);\n    let resizeObserver;\n\n    if (typeof ResizeObserver !== 'undefined') {\n      resizeObserver = new ResizeObserver(handleResize);\n      resizeObserver.observe(inputRef.current);\n    }\n\n    return () => {\n      handleResize.clear();\n      containerWindow.removeEventListener('resize', handleResize);\n\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    };\n  }, [syncHeight]);\n  useEnhancedEffect(() => {\n    syncHeight();\n  });\n  React.useEffect(() => {\n    renders.current = 0;\n  }, [value]);\n\n  const handleChange = event => {\n    renders.current = 0;\n\n    if (!isControlled) {\n      syncHeight();\n    }\n\n    if (onChange) {\n      onChange(event);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(\"textarea\", _extends({\n      value: value,\n      onChange: handleChange,\n      ref: handleRef // Apply the rows prop to get a \"correct\" first SSR paint\n      ,\n      rows: minRows,\n      style: _extends({\n        height: state.outerHeightStyle,\n        // Need a large enough difference to allow scrolling.\n        // This prevents infinite rendering loop.\n        overflow: state.overflow ? 'hidden' : null\n      }, style)\n    }, other)), /*#__PURE__*/_jsx(\"textarea\", {\n      \"aria-hidden\": true,\n      className: props.className,\n      readOnly: true,\n      ref: shadowRef,\n      tabIndex: -1,\n      style: _extends({}, styles.shadow, style, {\n        padding: 0\n      })\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? TextareaAutosize.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Maximum number of rows to display.\n   */\n  maxRows: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * Minimum number of rows to display.\n   * @default 1\n   */\n  minRows: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * @ignore\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  placeholder: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  style: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  value: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.number, PropTypes.string])\n} : void 0;\nexport default TextareaAutosize;"],"names":["_jsxs","_jsx"],"mappings":"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"}