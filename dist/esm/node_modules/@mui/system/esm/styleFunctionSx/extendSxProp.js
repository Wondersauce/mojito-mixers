import _extends from '../../../../@babel/runtime/helpers/esm/extends.js';
import _objectWithoutPropertiesLoose from '../../../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js';
import { isPlainObject } from '../../../utils/esm/deepmerge.js';
import '../../../utils/esm/elementAcceptingRef.js';
import '../../../utils/esm/elementTypeAcceptingRef.js';
import 'react-is';
import '../../../utils/esm/ponyfillGlobal.js';
import '../../../utils/esm/refType.js';
import 'react';
import '../../../utils/esm/integerPropType.js';
import { propToStyleFunction } from '../getThemeValue.js';

const _excluded = ["sx"];

const splitProps = props => {
  const result = {
    systemProps: {},
    otherProps: {}
  };
  Object.keys(props).forEach(prop => {
    if (propToStyleFunction[prop]) {
      result.systemProps[prop] = props[prop];
    } else {
      result.otherProps[prop] = props[prop];
    }
  });
  return result;
};

function extendSxProp(props) {
  const {
    sx: inSx
  } = props,
        other = _objectWithoutPropertiesLoose(props, _excluded);

  const {
    systemProps,
    otherProps
  } = splitProps(other);
  let finalSx;

  if (Array.isArray(inSx)) {
    finalSx = [systemProps, ...inSx];
  } else if (typeof inSx === 'function') {
    finalSx = (...args) => {
      const result = inSx(...args);

      if (!isPlainObject(result)) {
        return systemProps;
      }

      return _extends({}, systemProps, result);
    };
  } else {
    finalSx = _extends({}, systemProps, inSx);
  }

  return _extends({}, otherProps, {
    sx: finalSx
  });
}

export { extendSxProp as default };
//# sourceMappingURL=extendSxProp.js.map
