{"version":3,"file":"NoUnusedVariablesRule.mjs.js","sources":["../../../../../../node_modules/graphql/validation/rules/NoUnusedVariablesRule.mjs"],"sourcesContent":["import { GraphQLError } from '../../error/GraphQLError.mjs';\n\n/**\n * No unused variables\n *\n * A GraphQL operation is only valid if all variables defined by an operation\n * are used, either directly or within a spread fragment.\n *\n * See https://spec.graphql.org/draft/#sec-All-Variables-Used\n */\nexport function NoUnusedVariablesRule(context) {\n  let variableDefs = [];\n  return {\n    OperationDefinition: {\n      enter() {\n        variableDefs = [];\n      },\n\n      leave(operation) {\n        const variableNameUsed = Object.create(null);\n        const usages = context.getRecursiveVariableUsages(operation);\n\n        for (const { node } of usages) {\n          variableNameUsed[node.name.value] = true;\n        }\n\n        for (const variableDef of variableDefs) {\n          const variableName = variableDef.variable.name.value;\n\n          if (variableNameUsed[variableName] !== true) {\n            context.reportError(\n              new GraphQLError(\n                operation.name\n                  ? `Variable \"$${variableName}\" is never used in operation \"${operation.name.value}\".`\n                  : `Variable \"$${variableName}\" is never used.`,\n                {\n                  nodes: variableDef,\n                },\n              ),\n            );\n          }\n        }\n      },\n    },\n\n    VariableDefinition(def) {\n      variableDefs.push(def);\n    },\n  };\n}\n"],"names":[],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,qBAAqB,CAAC,OAAO,EAAE;AAC/C,EAAE,IAAI,YAAY,GAAG,EAAE,CAAC;AACxB,EAAE,OAAO;AACT,IAAI,mBAAmB,EAAE;AACzB,MAAM,KAAK,GAAG;AACd,QAAQ,YAAY,GAAG,EAAE,CAAC;AAC1B,OAAO;AACP;AACA,MAAM,KAAK,CAAC,SAAS,EAAE;AACvB,QAAQ,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACrD,QAAQ,MAAM,MAAM,GAAG,OAAO,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;AACrE;AACA,QAAQ,KAAK,MAAM,EAAE,IAAI,EAAE,IAAI,MAAM,EAAE;AACvC,UAAU,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AACnD,SAAS;AACT;AACA,QAAQ,KAAK,MAAM,WAAW,IAAI,YAAY,EAAE;AAChD,UAAU,MAAM,YAAY,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;AAC/D;AACA,UAAU,IAAI,gBAAgB,CAAC,YAAY,CAAC,KAAK,IAAI,EAAE;AACvD,YAAY,OAAO,CAAC,WAAW;AAC/B,cAAc,IAAI,YAAY;AAC9B,gBAAgB,SAAS,CAAC,IAAI;AAC9B,oBAAoB,CAAC,WAAW,EAAE,YAAY,CAAC,8BAA8B,EAAE,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;AACvG,oBAAoB,CAAC,WAAW,EAAE,YAAY,CAAC,gBAAgB,CAAC;AAChE,gBAAgB;AAChB,kBAAkB,KAAK,EAAE,WAAW;AACpC,iBAAiB;AACjB,eAAe;AACf,aAAa,CAAC;AACd,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,IAAI,kBAAkB,CAAC,GAAG,EAAE;AAC5B,MAAM,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC7B,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}