{"version":3,"file":"LoneSchemaDefinitionRule.mjs.js","sources":["../../../../../../node_modules/graphql/validation/rules/LoneSchemaDefinitionRule.mjs"],"sourcesContent":["import { GraphQLError } from '../../error/GraphQLError.mjs';\n\n/**\n * Lone Schema definition\n *\n * A GraphQL document is only valid if it contains only one schema definition.\n */\nexport function LoneSchemaDefinitionRule(context) {\n  var _ref, _ref2, _oldSchema$astNode;\n\n  const oldSchema = context.getSchema();\n  const alreadyDefined =\n    (_ref =\n      (_ref2 =\n        (_oldSchema$astNode =\n          oldSchema === null || oldSchema === void 0\n            ? void 0\n            : oldSchema.astNode) !== null && _oldSchema$astNode !== void 0\n          ? _oldSchema$astNode\n          : oldSchema === null || oldSchema === void 0\n          ? void 0\n          : oldSchema.getQueryType()) !== null && _ref2 !== void 0\n        ? _ref2\n        : oldSchema === null || oldSchema === void 0\n        ? void 0\n        : oldSchema.getMutationType()) !== null && _ref !== void 0\n      ? _ref\n      : oldSchema === null || oldSchema === void 0\n      ? void 0\n      : oldSchema.getSubscriptionType();\n  let schemaDefinitionsCount = 0;\n  return {\n    SchemaDefinition(node) {\n      if (alreadyDefined) {\n        context.reportError(\n          new GraphQLError(\n            'Cannot define a new schema within a schema extension.',\n            {\n              nodes: node,\n            },\n          ),\n        );\n        return;\n      }\n\n      if (schemaDefinitionsCount > 0) {\n        context.reportError(\n          new GraphQLError('Must provide only one schema definition.', {\n            nodes: node,\n          }),\n        );\n      }\n\n      ++schemaDefinitionsCount;\n    },\n  };\n}\n"],"names":[],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACO,SAAS,wBAAwB,CAAC,OAAO,EAAE;AAClD,EAAE,IAAI,IAAI,EAAE,KAAK,EAAE,kBAAkB,CAAC;AACtC;AACA,EAAE,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;AACxC,EAAE,MAAM,cAAc;AACtB,IAAI,CAAC,IAAI;AACT,MAAM,CAAC,KAAK;AACZ,QAAQ,CAAC,kBAAkB;AAC3B,UAAU,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,KAAK,CAAC;AACpD,cAAc,KAAK,CAAC;AACpB,cAAc,SAAS,CAAC,OAAO,MAAM,IAAI,IAAI,kBAAkB,KAAK,KAAK,CAAC;AAC1E,YAAY,kBAAkB;AAC9B,YAAY,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,KAAK,CAAC;AACtD,YAAY,KAAK,CAAC;AAClB,YAAY,SAAS,CAAC,YAAY,EAAE,MAAM,IAAI,IAAI,KAAK,KAAK,KAAK,CAAC;AAClE,UAAU,KAAK;AACf,UAAU,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,KAAK,CAAC;AACpD,UAAU,KAAK,CAAC;AAChB,UAAU,SAAS,CAAC,eAAe,EAAE,MAAM,IAAI,IAAI,IAAI,KAAK,KAAK,CAAC;AAClE,QAAQ,IAAI;AACZ,QAAQ,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,KAAK,CAAC;AAClD,QAAQ,KAAK,CAAC;AACd,QAAQ,SAAS,CAAC,mBAAmB,EAAE,CAAC;AACxC,EAAE,IAAI,sBAAsB,GAAG,CAAC,CAAC;AACjC,EAAE,OAAO;AACT,IAAI,gBAAgB,CAAC,IAAI,EAAE;AAC3B,MAAM,IAAI,cAAc,EAAE;AAC1B,QAAQ,OAAO,CAAC,WAAW;AAC3B,UAAU,IAAI,YAAY;AAC1B,YAAY,uDAAuD;AACnE,YAAY;AACZ,cAAc,KAAK,EAAE,IAAI;AACzB,aAAa;AACb,WAAW;AACX,SAAS,CAAC;AACV,QAAQ,OAAO;AACf,OAAO;AACP;AACA,MAAM,IAAI,sBAAsB,GAAG,CAAC,EAAE;AACtC,QAAQ,OAAO,CAAC,WAAW;AAC3B,UAAU,IAAI,YAAY,CAAC,0CAA0C,EAAE;AACvE,YAAY,KAAK,EAAE,IAAI;AACvB,WAAW,CAAC;AACZ,SAAS,CAAC;AACV,OAAO;AACP;AACA,MAAM,EAAE,sBAAsB,CAAC;AAC/B,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}